<!DOCTYPE html >
<html>
        <head>
          <title>transformers - ch.epfl.data.dblab.transformers</title>
          <meta name="description" content="transformers - ch.epfl.data.dblab.transformers" />
          <meta name="keywords" content="transformers ch.epfl.data.dblab.transformers" />
          <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
          
      <link href="../../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet" />
      <link href="../../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css" />
      <script type="text/javascript" src="../../../../../lib/jquery.js" id="jquery-js"></script>
      <script type="text/javascript" src="../../../../../lib/jquery-ui.js"></script>
      <script type="text/javascript" src="../../../../../lib/template.js"></script>
      <script type="text/javascript" src="../../../../../lib/tools.tooltip.js"></script>
      
      <script type="text/javascript">
         if(top === self) {
            var url = '../../../../../index.html';
            var hash = 'ch.epfl.data.dblab.transformers.package';
            var anchor = window.location.hash;
            var anchor_opt = '';
            if (anchor.length >= 1)
              anchor_opt = '@' + anchor.substring(1);
            window.location.href = url + '#' + hash + anchor_opt;
         }
   	  </script>
    
        </head>
        <body class="value">
      <div id="definition">
        <img alt="Package" src="../../../../../lib/package_big.png" />
        <p id="owner"><a href="../../../../package.html" class="extype" name="ch">ch</a>.<a href="../../../package.html" class="extype" name="ch.epfl">epfl</a>.<a href="../../package.html" class="extype" name="ch.epfl.data">data</a>.<a href="../package.html" class="extype" name="ch.epfl.data.dblab">dblab</a></p>
        <h1>transformers</h1><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      </div>

      <h4 id="signature" class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <span class="name">transformers</span>
      </span>
      </h4>
      
          <div id="comment" class="fullcommenttop"></div>
        

      <div id="mbrsel">
        <div id="textfilter"><span class="pre"></span><span class="input"><input id="mbrsel-input" type="text" accesskey="/" /></span><span class="post"></span></div>
        
        
        <div id="visbl">
            <span class="filtertype">Visibility</span>
            <ol><li class="public in"><span>Public</span></li><li class="all out"><span>All</span></li></ol>
          </div>
      </div>

      <div id="template">
        <div id="allMembers">
        

        <div id="types" class="types members">
              <h3>Type Members</h3>
              <ol><li name="ch.epfl.data.dblab.transformers.AssertTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="AssertTransformer[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsRecursiveRuleBasedTransformer[Lang]"></a>
      <a id="AssertTransformer[Lang&lt;:Base]:AssertTransformer[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="AssertTransformer.html"><span class="name">AssertTransformer</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.ir.Base">Base</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.AssertTransformer.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@AssertTransformer[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsRecursiveRuleBasedTransformer[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A transformer which checks the input program to satisfy all the given assertions.</p><div class="fullcomment"><div class="comment cmt"><p>A transformer which checks the input program to satisfy all the given assertions. This transformer
does not change the input program.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.Assertion" visbl="pub" data-isabs="true" fullComment="no" group="Ungrouped">
      <a id="AssertionextendsAnyRef"></a>
      <a id="Assertion:Assertion"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier">sealed </span>
        <span class="kind">trait</span>
      </span>
      <span class="symbol">
        <a href="Assertion.html"><span class="name">Assertion</span></a><span class="result"> extends <span class="extype" name="scala.AnyRef">AnyRef</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@AssertionextendsAnyRef" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Common interface for assertions
</p>
    </li><li name="ch.epfl.data.dblab.transformers.ColumnStoreTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="ColumnStoreTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="ColumnStoreTransformer:ColumnStoreTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="ColumnStoreTransformer.html"><span class="name">ColumnStoreTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ColumnStoreTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms row layout representation to columnar layout representation.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms row layout representation to columnar layout representation.</p><p>Example:</p><pre><span class="cmt">// RecordA { fieldA: Int, fieldB: String }</span>
<span class="kw">val</span> array = <span class="kw">new</span> <span class="std">Array</span>[RecordA](size)
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> elem = array(i)
  process(elem.fieldA, elem.fieldB)
}</pre><p>is converted to:</p><pre><span class="cmt">// ColumnStoreOfRecordA {</span>
<span class="cmt">//   arrayOfFieldA: Int,</span>
<span class="cmt">//   arrayOfFieldB: String</span>
<span class="cmt">// }</span>
<span class="kw">val</span> csArray = ColumnStoreOfRecordA {
  <span class="kw">val</span> arrayOfFieldA = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](size)
  <span class="kw">val</span> arrayOfFieldB = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">String</span>](size)
}
<span class="cmt">// RowOfRecordA {</span>
<span class="cmt">//   columnStorePointer: ColumnStoreOfRecordA,</span>
<span class="cmt">//   index: Int</span>
<span class="cmt">// }</span>
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> csElem = RowOfRecordA {
    <span class="kw">val</span> columnStorePointer = csArray
    <span class="kw">val</span> index = i
  }
  <span class="kw">val</span> elemFieldA = csElem.columnStorePointer.arrayOfFieldA(csElem.index)
  <span class="kw">val</span> elemFieldB = csElem.columnStorePointer.arrayOfFieldB(csElem.index)
  process(elemFieldA, elemFieldB)
}</pre><p>If this optimization is combined with ParameterPromotion, the abstraction of
<code>ColumnStoreOfRecordA</code> and <code>RowOfRecordA</code> will be removed.
The previous example is converted to the following program:</p><pre><span class="kw">val</span> arrayOfFieldA = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](size)
<span class="kw">val</span> arrayOfFieldB = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">String</span>](size)
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> elemFieldA = arrayOfFieldA(i)
  <span class="kw">val</span> elemFieldB = arrayOfFieldB(i)
  process(elemFieldA, elemFieldB)
}</pre><p>Precondition:
The elements of the array of records that we would like to convert, should not
be set to a null value.
Also, the elements of such array should be set to the value of a mutable variable.</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.ConstSizeArrayToLocalVars" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="ConstSizeArrayToLocalVarsextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="ConstSizeArrayToLocalVars:ConstSizeArrayToLocalVars"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="ConstSizeArrayToLocalVars.html"><span class="name">ConstSizeArrayToLocalVars</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ConstSizeArrayToLocalVarsextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms the elements of an array that has a statically known and small size
into local variables.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms the elements of an array that has a statically known and small size
into local variables.</p><p>As a simple example, the following code:</p><pre><span class="kw">val</span> array = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](<span class="num">2</span>)
array(<span class="num">0</span>) = foo()
array(<span class="num">1</span>) = goo()
...
process(array(<span class="num">0</span>), array(<span class="num">1</span>))</pre><p>is converted to:</p><pre><span class="kw">val</span> array0 = foo()
<span class="kw">val</span> array1 = goo()
...
process(array0, array1)</pre><p>The interesting case is when a desired array is a field of a record. Then, that array field
is converted to several fields in the record representing the elements of that array.</p><p>As an example, the following code:</p><pre><span class="kw">val</span> record = Record {
  <span class="kw">val</span> arr = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](<span class="num">2</span>)
}
record.arr(<span class="num">0</span>) = foo()
record.arr(<span class="num">1</span>) = goo()
...
process(record.arr(<span class="num">0</span>), record.arr(<span class="num">1</span>))</pre><p>is converted to:</p><pre><span class="kw">val</span> record = Record {
  <span class="kw">var</span> arr: <span class="std">Int</span> = _
  <span class="kw">var</span> arr_1: <span class="std">Int</span> = _
}
record.arr = foo()
record.arr_1 = goo()
...
process(record.arr, record.arr_1)</pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.ContainerFlatTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="ContainerFlatTransformer[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponentwithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Componentwithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps]extendsRecursiveRuleBasedTransformer[Lang]withStructCollector[Lang]"></a>
      <a id="ContainerFlatTransformer[Lang&lt;:ArrayComponentwithTuple2ComponentwithContOps]:ContainerFlatTransformer[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="ContainerFlatTransformer.html"><span class="name">ContainerFlatTransformer</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponent">ArrayComponent</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Component">Tuple2Component</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps">ContOps</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerFlatTransformer.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerFlatTransformer.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ContainerFlatTransformer[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponentwithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Componentwithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps]extendsRecursiveRuleBasedTransformer[Lang]withStructCollector[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A transformer which converts a singly linked list of records to an intrusive linked list (where the record now stores
the <code>next</code> pointer alongside its own fields)</p><div class="fullcomment"><div class="comment cmt"><p>A transformer which converts a singly linked list of records to an intrusive linked list (where the record now stores
the <code>next</code> pointer alongside its own fields)</p><p>Example:</p><pre><span class="cmt">// class Container[T] { val elem: T, var next: Container[T] }</span>
<span class="cmt">// struct RecordA { val fieldA: Int, val fieldB: String }</span>
<span class="kw">val</span> rec1 = <span class="kw">new</span> RecordA(...)
<span class="kw">val</span> rec2 = <span class="kw">new</span> RecordA(...)
<span class="kw">val</span> contRecA = <span class="kw">new</span> Containter[RecordA](rec1)
contRecA.next = <span class="kw">new</span> Containter[RecordA](rec2)
<span class="kw">val</span> rec3: RecordA = contRecA.elem
process(rec3)</pre><p>is converted to:</p><pre><span class="cmt">// RecordA { val fieldA: Int, val fieldB: String, var next: RecordA }</span>
<span class="kw">val</span> rec1 = <span class="kw">new</span> RecordA(...)
<span class="kw">val</span> rec2 = <span class="kw">new</span> RecordA(...)
rec1.next = rec2
process(rec1)</pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.ContainerLowering" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="ContainerLowering[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponentwithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Componentwithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps]extendsRecursiveRuleBasedTransformer[Lang]withArrayEscapeLowering[Lang]withVarEscapeLowering[Lang]withTuple2EscapeLowering[Lang]withLambdaEscapeLowering[Lang]withRuleBasedLowering[Lang]"></a>
      <a id="ContainerLowering[Lang&lt;:ArrayComponentwithTuple2ComponentwithContOps]:ContainerLowering[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="ContainerLowering.html"><span class="name">ContainerLowering</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponent">ArrayComponent</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Component">Tuple2Component</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps">ContOps</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.ArrayEscapeLowering">ArrayEscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.VarEscapeLowering">VarEscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Tuple2EscapeLowering">Tuple2EscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.LambdaEscapeLowering">LambdaEscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedLowering">RuleBasedLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ContainerLowering[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.ArrayComponentwithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Componentwithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOps]extendsRecursiveRuleBasedTransformer[Lang]withArrayEscapeLowering[Lang]withVarEscapeLowering[Lang]withTuple2EscapeLowering[Lang]withLambdaEscapeLowering[Lang]withRuleBasedLowering[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A lowering transformation for converting Cont objects (Cont is a class that encodes singly linked lists) into records.</p><div class="fullcomment"><div class="comment cmt"><p>A lowering transformation for converting Cont objects (Cont is a class that encodes singly linked lists) into records.
Note: the output record can be viewed as recursive, but this is hidden in the StructTags.ClassTag</p><p>Example:</p><pre><span class="cmt">// class Container[T] { val elem: T, var next: Container[T] }</span>
<span class="cmt">// struct RecordA { val fieldA: Int, val fieldB: String }</span>
<span class="kw">val</span> rec1 = <span class="kw">new</span> RecordA(...)
<span class="kw">val</span> contRecA = <span class="kw">new</span> Containter[RecordA](rec1)</pre><p>is converted to:</p><pre><span class="cmt">// struct RecordA { val fieldA: Int, val fieldB: String }</span>
<span class="cmt">// struct ContainerRecordA { val elem: RecordA, var next: ContainerRecordA }</span>
<span class="kw">val</span> rec1 = <span class="kw">new</span> RecordA(...)
<span class="kw">val</span> contRecA = <span class="kw">new</span> ContainerRecordA(rec1)</pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapBucketAnalyser" visbl="pub" data-isabs="true" fullComment="no" group="Ungrouped">
      <a id="HashMapBucketAnalyser[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps]extendsAnyRef"></a>
      <a id="HashMapBucketAnalyser[Lang&lt;:HashMapOps]:HashMapBucketAnalyser[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">trait</span>
      </span>
      <span class="symbol">
        <a href="HashMapBucketAnalyser.html"><span class="name">HashMapBucketAnalyser</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span></span>]</span><span class="result"> extends <span class="extype" name="scala.AnyRef">AnyRef</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapBucketAnalyser[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps]extendsAnyRef" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">An analyser for computing the number of necessary buckets for a HashMap
</p>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapGrouping" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="HashMapGroupingextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withWhileRangeProcessing"></a>
      <a id="HashMapGrouping:HashMapGrouping"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapGrouping.html"><span class="name">HashMapGrouping</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <a href="WhileRangeProcessing.html" class="extype" name="ch.epfl.data.dblab.transformers.WhileRangeProcessing">WhileRangeProcessing</a></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapGroupingextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withWhileRangeProcessing" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A transformer for partitioning and indexing MultiMaps created by the hash join operator.</p><div class="fullcomment"><div class="comment cmt"><p>A transformer for partitioning and indexing MultiMaps created by the hash join operator. This transformation
converts a MultiMap and the corresponding operations into an Array (either one- or two-dimensional).</p><p>As an example the following program:</p><pre><span class="kw">val</span> multiMap = <span class="kw">new</span> MultiMap[<span class="std">Int</span>, LeftRelation]
<span class="kw">var</span> leftIndex = <span class="num">0</span>
<span class="kw">while</span>(leftIndex &lt; leftArray.length) {
  <span class="kw">val</span> leftElement = leftArray(leftIndex)
  <span class="kw">if</span>(leftPredicate(leftElement)) {
    multiMap.addBinding(leftElement.primaryKey, leftElement)
  }
  leftIndex += <span class="num">1</span>
}
<span class="kw">var</span> rightIndex = <span class="num">0</span>
<span class="kw">while</span>(rightIndex &lt; rightArray.length) {
  <span class="kw">val</span> rightElement = rightArray(rightIndex)
  <span class="kw">val</span> setOption = multiMap.get(rightElement.foreignKey)
  <span class="kw">if</span>(setOption.nonEmpty) {
    <span class="kw">val</span> tmpBuffer = setOption.get
    tmpBuffer foreach { leftElement <span class="kw">=&gt;</span>
      <span class="kw">if</span> (leftElement.primaryKey == rightElement.foreignKey) {
        process(leftElement, rightElement)
      }
    }
  }
  rightIndex += <span class="num">1</span>
}</pre><p>is converted to:</p><pre><span class="kw">var</span> rightIndex = <span class="num">0</span>
<span class="kw">val</span> leftArrayGroupedByPrimaryKey: <span class="std">Array</span>[LeftRelation] = {
  <span class="cmt">// Constructs an array in which the index of each element in that array</span>
  <span class="cmt">// is the primary key of that element (cf. `createPartitionedArray` method)</span>
}
<span class="kw">while</span>(rightIndex &lt; rightArray.length) {
  <span class="kw">val</span> rightElement = rightArray(rightIndex)
  <span class="kw">val</span> primaryKey = rightElement.foreignKey
  <span class="kw">val</span> leftElement = leftArrayGroupedByPrimaryKey(primaryKey)
  <span class="kw">if</span>(leftPredicate(leftElement)) {
    <span class="kw">if</span>(leftElement.primaryKey == rightElement.foreignKey) {
      process(leftElement, rightElement)
    }
  }
  rightIndex += <span class="num">1</span>
}</pre><p>Precondition:
1) The array that is partitioned should not be an intermediate array. In other words,
it should be an array which is created while scanning a relation from an input source
(e.g. csv file).</p><p>In the given example, three loops (2 while loops + 1 foreach) are converted
into a single loop (1 while loop).
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapHoist" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="HashMapHoistextendsOptimizer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="HashMapHoist:HashMapHoist"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapHoist.html"><span class="name">HashMapHoist</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Optimizer">Optimizer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapHoistextendsOptimizer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Hoists <code>new HashMap</code>s and <code>new MultiMap</code>s from the query processing part
into the loading time.</p><div class="fullcomment"><div class="comment cmt"><p>Hoists <code>new HashMap</code>s and <code>new MultiMap</code>s from the query processing part
into the loading time.</p><p>Example:</p><pre><span class="cmt">// Loading Time</span>
loadTables()
<span class="cmt">// Query Processing Time</span>
<span class="kw">val</span> hm = <span class="kw">new</span> HashMap
<span class="kw">val</span> mm = <span class="kw">new</span> MultiMap
processQuery()</pre><p>is converted to:</p><pre><span class="cmt">// Loading Time</span>
loadTables()
<span class="kw">val</span> hm = <span class="kw">new</span> HashMap
<span class="kw">val</span> mm = <span class="kw">new</span> MultiMap
<span class="cmt">// Query Processing Time</span>
processQuery()</pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapNoCollisionTransformation" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="HashMapNoCollisionTransformationextendsHashMapOptimalNoCollisionTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]"></a>
      <a id="HashMapNoCollisionTransformation:HashMapNoCollisionTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapNoCollisionTransformation.html"><span class="name">HashMapNoCollisionTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOptimalNoCollisionTransformation">HashMapOptimalNoCollisionTransformation</span> with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>] with <a href="HashMapBucketAnalyser.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapBucketAnalyser">HashMapBucketAnalyser</a>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapNoCollisionTransformationextendsHashMapOptimalNoCollisionTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms HashMaps which have no collision in the hash function computation and also
in the case that the key has a continuous value into a one dimensional Array.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms HashMaps which have no collision in the hash function computation and also
in the case that the key has a continuous value into a one dimensional Array.
The assumptions for this transformation is similar to <a href="HashMapToSetTransformation.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapToSetTransformation">HashMapToSetTransformation</a>.
In addition, we make the assumption that there is no collision.</p><p>Example:</p><pre><span class="cmt">// RecordA { key: Int, fieldA: Int, fieldB: String }</span>
<span class="kw">val</span> hm = <span class="kw">new</span> HashMap[<span class="std">Int</span>, RecordA]
<span class="cmt">// Add some element into the HashMap</span>
hm.foreach( { <span class="kw">case</span> (key, value) <span class="kw">=&gt;</span>
  process(key, value)
})</pre><p>is converted to:</p><pre><span class="kw">val</span> table = <span class="kw">new</span> <span class="std">Array</span>[RecordA]
<span class="kw">var</span> currentSize = <span class="num">0</span>
<span class="cmt">// Add some element into the lowered HashMap</span>
<span class="kw">for</span> (i <span class="kw">&lt;-</span> <span class="num">0</span> until currentSize) {
  <span class="kw">val</span> value = table(i)
  <span class="kw">if</span> (value != <span class="kw">null</span>) {
    <span class="kw">val</span> key = extractKey(value) <span class="cmt">// extracts key from the value</span>
    process(key, value)
  }
}</pre><p>Precondition:
1) There should be a functional dependancy between key and value, which means
that we can extract key from the value.
2) Furthermore, this lowering is implemented only in the case of using 3 methods
of a HashMap: a) getOrElseUpdate b) foreach c) remove.
These methods should be accessed exactly in the given order.
In the other cases this transformation should not be applied.
3) There should be no collision between the hashing function computed using the
keys.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapTo1DArray" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="HashMapTo1DArray[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]extendsRuleBasedTransformer[Lang]"></a>
      <a id="HashMapTo1DArray[Lang&lt;:HashMapOpswithRangeOpswithArrayOpswithOptionOpswithIntOpswithTuple2Ops]:HashMapTo1DArray[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapTo1DArray.html"><span class="name">HashMapTo1DArray</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.HashMapTo1DArray.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapTo1DArray[Lang&lt;:ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]extendsRuleBasedTransformer[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms HashMaps which have no collision in the hash function computation and also
in the case that the key has a continuous value into a one dimensional Array.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms HashMaps which have no collision in the hash function computation and also
in the case that the key has a continuous value into a one dimensional Array.</p><p>The main difference with <a href="HashMapNoCollisionTransformation.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapNoCollisionTransformation">HashMapNoCollisionTransformation</a> is that this transformer,
goes one step further and transforms also the values (which are records which duplicate the key)
into other values which do not contain the key anymore. As a result, they save more computation
and space.</p><p>Example:</p><pre><span class="cmt">// RecordA { key: Int, fieldA: Int }</span>
<span class="kw">val</span> hm = <span class="kw">new</span> HashMap[<span class="std">Int</span>, RecordA]
<span class="cmt">// Add some element into the HashMap</span>
hm.foreach( { <span class="kw">case</span> (key, value) <span class="kw">=&gt;</span>
  process(key, value.fieldA)
})</pre><p>is converted to:</p><pre><span class="kw">val</span> table = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>]
<span class="kw">var</span> currentSize = <span class="num">0</span>
<span class="cmt">// Add some element into the lowered HashMap which modifies currentSize</span>
<span class="kw">for</span> (i <span class="kw">&lt;-</span> <span class="num">0</span> until currentSize) {
  <span class="kw">val</span> value = table(i)
  process(i, value)
}</pre><p>Precondition:
1) There should be a functional dependancy between key and value, which means
that we can extract key from the value.
2) Furthermore, this lowering is implemented only in the case of using 3 methods
of a HashMap: a) getOrElseUpdate b) foreach c) remove.
In the other cases this transformation should not be applied.
3) There should be no collision between the hashing function computed using the
keys.
4) The record for the value, should only have 2 fields, one of which is the key.
5) Key must be an integer, otherwise this rule is not applicable.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapToSetTransformation" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="HashMapToSetTransformationextendsHashMapOptimalNoMallocTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]"></a>
      <a id="HashMapToSetTransformation:HashMapToSetTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapToSetTransformation.html"><span class="name">HashMapToSetTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOptimalNoMallocTransformation">HashMapOptimalNoMallocTransformation</span> with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOps">SetOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>] with <a href="HashMapBucketAnalyser.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapBucketAnalyser">HashMapBucketAnalyser</a>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOps">SetOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapToSetTransformationextendsHashMapOptimalNoMallocTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A lowering transformation which transforms a HashMap to an Array[Set[_]].</p><div class="fullcomment"><div class="comment cmt"><p>A lowering transformation which transforms a HashMap to an Array[Set[_]].
This transformation is applied whenever in a HashMap the value contains the
key. In this case there is no longer any need to store the key together with
the value.</p><p>This transformation extends the already generated transformation, however
here we specify the number of buckets and how to extract a key from a value.</p><p>Example:</p><pre><span class="cmt">// RecordA { key: Int, fieldA: Int, fieldB: String }</span>
<span class="kw">val</span> hm = <span class="kw">new</span> HashMap[<span class="std">Int</span>, RecordA]
<span class="cmt">// Add some element into the HashMap</span>
hm.foreach( { <span class="kw">case</span> (key, value) <span class="kw">=&gt;</span>
  process(key, value)
})</pre><pre><span class="kw">val</span> table = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Set</span>[RecordA]]
<span class="kw">var</span> currentSize = <span class="num">0</span>
<span class="cmt">// Add some element into the lowered HashMap which which modifies currentSize</span>
<span class="kw">for</span> (i <span class="kw">&lt;-</span> <span class="num">0</span> until currentSize) {
  <span class="kw">val</span> list = table(i)
  <span class="kw">if</span> (list != <span class="kw">null</span>) {
    list.foreach(value <span class="kw">=&gt;</span>
      <span class="kw">val</span> key = extractKey(value) <span class="cmt">// extracts key from the value</span>
      process(key, value)
    )
  }
}</pre><p>Precondition:
There should be a functional dependancy between key and value, which means
that we can extract key from the value.
Furthermore, this lowering is implemented only in the case of using 3 methods
of a HashMap: 1) getOrElseUpdate 2) foreach 3) remove.
In the other cases this transformation should not be applied.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapToSetWithMallocTransformation" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="HashMapToSetWithMallocTransformationextendsHashMapOptimalTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]"></a>
      <a id="HashMapToSetWithMallocTransformation:HashMapToSetWithMallocTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="HashMapToSetWithMallocTransformation.html"><span class="name">HashMapToSetWithMallocTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOptimalTransformation">HashMapOptimalTransformation</span> with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOps">SetOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>] with <a href="HashMapBucketAnalyser.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapBucketAnalyser">HashMapBucketAnalyser</a>[<span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOps">HashMapOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOps">SetOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOps">RangeOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.ArrayOps">ArrayOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.OptionOps">OptionOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.IntOps">IntOps</span> with <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops">Tuple2Ops</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapToSetWithMallocTransformationextendsHashMapOptimalTransformationwithStructCollector[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]withHashMapBucketAnalyser[ch.epfl.data.sc.pardis.deep.scalalib.collection.HashMapOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.Tuple2Ops]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.IntroduceHashIndexForRangeLookup" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="IntroduceHashIndexForRangeLookupextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="IntroduceHashIndexForRangeLookup:IntroduceHashIndexForRangeLookup"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="IntroduceHashIndexForRangeLookup.html"><span class="name">IntroduceHashIndexForRangeLookup</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@IntroduceHashIndexForRangeLookupextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A transformer which introduces hash index in the case of a range lookup to
only iterate over the relavant part of the given range.</p><div class="fullcomment"><div class="comment cmt"><p>A transformer which introduces hash index in the case of a range lookup to
only iterate over the relavant part of the given range.</p><p>Given an input program first it identify all arrays and the iterations over those arrays.
Then it looks for the filters over the elements of all those arrays. If it identifies
that there is filter based on a range of values, then it partitions the array into different
chuncks in the loading time. Then, it iterates only over the relavant partitions of the arrays
in the query processing time.</p><p>As an example:</p><pre><span class="kw">for</span>(i <span class="kw">&lt;-</span> start until end) {
  <span class="kw">val</span> elem = array(i)
  <span class="kw">if</span>(min &lt; elem.field &amp;&amp; elem.field &lt; max) {
    process(elem)
  }
}</pre><p>is converted to</p><pre><span class="cmt">// During Loading Time</span>
<span class="kw">val</span> partitionedArray = {
  <span class="cmt">// partition the elements of the original array `array` using the field</span>
  <span class="cmt">// `field` in a way</span>
}
<span class="cmt">// During Query Processing Time</span>
<span class="kw">val</span> minIndex = {
  <span class="cmt">// compute the index containing all elements that the value of their field</span>
  <span class="cmt">// `field` is greater than min</span>
}
<span class="kw">val</span> maxIndex = {
  <span class="cmt">// compute the index containing all elements that the value of their field</span>
  <span class="cmt">// `field` is less than max</span>
}
<span class="kw">for</span>(index <span class="kw">&lt;-</span> minIndex to maxIndex) {
  <span class="kw">for</span>(elem <span class="kw">&lt;-</span> partitionedArray(index)) {
    <span class="kw">if</span>(min &lt; elem.field &amp;&amp; elem.field &lt; max) {
      process(elem)
    }
  }
}</pre><p>Precondition:
1) The array that will be partitioned should not be an intermediate array. In
other words, it should be an array which is created while scanning a relation
from an input source (e.g. csv file).
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.LargeOutputPrintHoister" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="LargeOutputPrintHoisterextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="LargeOutputPrintHoister:LargeOutputPrintHoister"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="LargeOutputPrintHoister.html"><span class="name">LargeOutputPrintHoister</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@LargeOutputPrintHoisterextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">In the cases that printing the result output is very time consuming, this transformer
puts the printing part outside of the query processing timing.</p>
    </li><li name="ch.epfl.data.dblab.transformers.MemoryAllocationHoist" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="MemoryAllocationHoistextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="MemoryAllocationHoist:MemoryAllocationHoist"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="MemoryAllocationHoist.html"><span class="name">MemoryAllocationHoist</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@MemoryAllocationHoistextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms <code>malloc</code>s inside the part which runs the query into buffers which are allocated
at the loading time.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms <code>malloc</code>s inside the part which runs the query into buffers which are allocated
at the loading time.</p><p>Example:</p><pre><span class="cmt">// During Query Processing Time</span>
<span class="kw">while</span>(condition) {
  <span class="cmt">// the following record is allocated in the critical path</span>
  <span class="kw">val</span> record = <span class="kw">new</span> RecordA(...)
  process(record)
}</pre><p>is converted to:</p><pre><span class="cmt">// During Loading Time</span>
<span class="kw">val</span> recordAPool = <span class="kw">new</span> <span class="std">Array</span>[RecordA](estimedSizeForRecordA)
<span class="kw">var</span> recordAPoolCounter = <span class="num">0</span>
<span class="cmt">// During Query Processing Time</span>
<span class="kw">while</span>(condition) {
  <span class="kw">val</span> record = recordAPool(recordAPoolCounter)
  initRecordA(record)
  recordAPoolCounter += <span class="num">1</span>
  process(record)
}</pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.MultiMapToSetTransformation" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="MultiMapToSetTransformationextendsMultiMapOptimalTransformation"></a>
      <a id="MultiMapToSetTransformation:MultiMapToSetTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="MultiMapToSetTransformation.html"><span class="name">MultiMapToSetTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.MultiMapOptimalTransformation">MultiMapOptimalTransformation</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@MultiMapToSetTransformationextendsMultiMapOptimalTransformation" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.ParameterPromotionWithVar" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="ParameterPromotionWithVar[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsParameterPromotion[Lang]withStructCollector[Lang]"></a>
      <a id="ParameterPromotionWithVar[Lang&lt;:Base]:ParameterPromotionWithVar[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="ParameterPromotionWithVar.html"><span class="name">ParameterPromotionWithVar</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.ir.Base">Base</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.ParameterPromotion">ParameterPromotion</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ParameterPromotionWithVar.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.ParameterPromotionWithVar.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ParameterPromotionWithVar[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsParameterPromotion[Lang]withStructCollector[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.RecordLowering" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="RecordLoweringextendsLowering[ch.epfl.data.dblab.deep.dsls.QueryEngineExp,ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withRecordUsageAnalysis[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="RecordLowering:RecordLowering"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="RecordLowering.html"><span class="name">RecordLowering</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Lowering">Lowering</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>, <a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <a href="RecordUsageAnalysis.html" class="extype" name="ch.epfl.data.dblab.transformers.RecordUsageAnalysis">RecordUsageAnalysis</a>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@RecordLoweringextendsLowering[ch.epfl.data.dblab.deep.dsls.QueryEngineExp,ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withRecordUsageAnalysis[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Lowers the query operators as well as the case class records for the relation
records and intermediate records to structs.</p><div class="fullcomment"><div class="comment cmt"><p>Lowers the query operators as well as the case class records for the relation
records and intermediate records to structs.
Furthermore, while lowering the case class records, finds the fields that are
unused and if <code>removeUnusedFields</code> is true, removes them.
For example:</p><pre><span class="kw">val</span> rec = <span class="kw">new</span> Record { <span class="kw">var</span> fieldA: <span class="std">Int</span>, <span class="kw">val</span> fieldB: <span class="std">String</span> }
rec.fieldA = <span class="num">2</span>
<span class="cmt">// fieldB is not used</span></pre><p>is converted to:</p><pre><span class="kw">val</span> rec = <span class="kw">new</span> Record { <span class="kw">var</span> fieldA: <span class="std">Int</span> }
rec.fieldA = <span class="num">2</span>
<span class="cmt">// fieldB is not used</span></pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.RecordLoweringPostProcess" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="RecordLoweringPostProcessextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="RecordLoweringPostProcess:RecordLoweringPostProcess"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="RecordLoweringPostProcess.html"><span class="name">RecordLoweringPostProcess</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@RecordLoweringPostProcessextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.RecordUsageAnalysis" visbl="pub" data-isabs="true" fullComment="no" group="Ungrouped">
      <a id="RecordUsageAnalysis[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsTraverser[Lang]"></a>
      <a id="RecordUsageAnalysis[Lang&lt;:Base]:RecordUsageAnalysis[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">trait</span>
      </span>
      <span class="symbol">
        <a href="RecordUsageAnalysis.html"><span class="name">RecordUsageAnalysis</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <span class="extype" name="ch.epfl.data.sc.pardis.ir.Base">Base</span></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Traverser">Traverser</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.RecordUsageAnalysis.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@RecordUsageAnalysis[Lang&lt;:ch.epfl.data.sc.pardis.ir.Base]extendsTraverser[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.RelationColumnarLayoutTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="RelationColumnarLayoutTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="RelationColumnarLayoutTransformer:RelationColumnarLayoutTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="RelationColumnarLayoutTransformer.html"><span class="name">RelationColumnarLayoutTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.StructCollector">StructCollector</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@RelationColumnarLayoutTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withStructCollector[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Transforms row layout representation of the source relations to columnar layout representation.</p><div class="fullcomment"><div class="comment cmt"><p>Transforms row layout representation of the source relations to columnar layout representation.</p><p>Example:</p><pre><span class="cmt">// RecordA { fieldA: Int, fieldB: String }</span>
<span class="kw">val</span> array = <span class="kw">new</span> <span class="std">Array</span>[RecordA](size)
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> elem = array(i)
  process(elem.fieldA, elem.fieldB)
}</pre><p>is converted to:</p><pre><span class="kw">val</span> arrayOfFieldA = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](size)
<span class="kw">val</span> arrayOfFieldB = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">String</span>](size)
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> elem = RecordA {
    <span class="kw">val</span> fieldA = arrayOfFieldA(i)
    <span class="kw">val</span> fieldB = arrayOfFieldB(i)
  }
  process(elem.fieldA, elem.fieldB)
}</pre><p>If this optimization is combined with ParameterPromotion, the abstraction of
<code>ColumnStoreOfRecordA</code> and <code>RowOfRecordA</code> will be removed.
The previous example is converted to the following program:</p><pre><span class="kw">val</span> arrayOfFieldA = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](size)
<span class="kw">val</span> arrayOfFieldB = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">String</span>](size)
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  <span class="kw">val</span> elemFieldA = arrayOfFieldA(i)
  <span class="kw">val</span> elemFieldB = arrayOfFieldB(i)
  process(elemFieldA, elemFieldB)
}</pre><p>Precondition:
The arrays should correspond to source relations.</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.SetToArrayTransformation" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="SetToArrayTransformationextendsSetArrayTransformationwithArrayEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withVarEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withTuple2EscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withOptionEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withLambdaEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withRuleBasedLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]"></a>
      <a id="SetToArrayTransformation:SetToArrayTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="SetToArrayTransformation.html"><span class="name">SetToArrayTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetArrayTransformation">SetArrayTransformation</span> with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.ArrayEscapeLowering">ArrayEscapeLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.VarEscapeLowering">VarEscapeLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Tuple2EscapeLowering">Tuple2EscapeLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.OptionEscapeLowering">OptionEscapeLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.LambdaEscapeLowering">LambdaEscapeLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedLowering">RuleBasedLowering</span>[<a href="SetToArrayTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.RangeOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang">Lang</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SetToArrayTransformationextendsSetArrayTransformationwithArrayEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withVarEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withTuple2EscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withOptionEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withLambdaEscapeLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]withRuleBasedLowering[ch.epfl.data.dblab.transformers.SetToArrayTransformation.Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Converts a Set collection, which there is no duplicate element inserted into it,
to a record of Int and Array which represent the size and an array containing
the elements.</p><div class="fullcomment"><div class="comment cmt"><p>Converts a Set collection, which there is no duplicate element inserted into it,
to a record of Int and Array which represent the size and an array containing
the elements.
To check how this transformation is implemented take a look at the implementation
of <span class="extype" name="sc.pardis.shallow.scalalib.collection.SetArray">sc.pardis.shallow.scalalib.collection.SetArray</span>. Purgatory automatically
generates the skeleton of the core part of this transformation out of the shallow
implementation.</p><p>Example:</p><pre><span class="kw">val</span> elements: Collection[A] = <span class="cmt">// some collection of elements of type A</span>
<span class="kw">val</span> set = <span class="std">Set</span>[A]()
<span class="kw">for</span>(elem <span class="kw">&lt;-</span> elements) {
  set += elem
}
...
<span class="kw">for</span>(e <span class="kw">&lt;-</span> set) { <span class="cmt">// desugared into `set.foreach(e => ...)`</span>
  process(e)
}</pre><p>is converted into:</p><pre><span class="kw">val</span> elements: Collection[A] = <span class="cmt">// some collection of elements of type A</span>
<span class="kw">val</span> setRecord = Record {
  <span class="kw">var</span> maxSize: <span class="std">Int</span> = <span class="num">0</span>;
  <span class="kw">val</span> array: <span class="std">Array</span>[A] = <span class="kw">new</span> <span class="std">Array</span>[A](MAX_SIZE)
}
<span class="kw">for</span>(elem <span class="kw">&lt;-</span> elements) {
  setRecord.array(setRecord.maxSize) = elem
  setRecord.maxSize += <span class="num">1</span>
}
...
<span class="kw">for</span>(i <span class="kw">&lt;-</span> <span class="num">0</span> until setRecord.maxSize) {
  <span class="kw">val</span> e = setRecord.array(i)
  process(e)
}</pre><p>Precondition:
The elements inserted into the set should not have any duplication. Otherwise,
this transformation does not work correctly. There is no analysis phase involved
for check this contraint, which means it should be made sure by the user.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="SetToLinkedListTransformationextendsSetLinkedListTransformationwithArrayEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withVarEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withTuple2EscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withOptionEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withLambdaEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withRuleBasedLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]"></a>
      <a id="SetToLinkedListTransformation:SetToLinkedListTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="SetToLinkedListTransformation.html"><span class="name">SetToLinkedListTransformation</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.deep.scalalib.collection.SetLinkedListTransformation">SetLinkedListTransformation</span> with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.ArrayEscapeLowering">ArrayEscapeLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.VarEscapeLowering">VarEscapeLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.Tuple2EscapeLowering">Tuple2EscapeLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.OptionEscapeLowering">OptionEscapeLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.LambdaEscapeLowering">LambdaEscapeLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedLowering">RuleBasedLowering</span>[<a href="SetToLinkedListTransformation$.html#Lang=ch.epfl.data.sc.pardis.deep.scalalib.collection.SetOpswithch.epfl.data.sc.pardis.deep.scalalib.collection.ContOpswithch.epfl.data.sc.pardis.deep.scalalib.ArrayOpswithch.epfl.data.sc.pardis.deep.scalalib.IntOpswithch.epfl.data.sc.pardis.deep.scalalib.BooleanOpswithch.epfl.data.sc.pardis.deep.scalalib.OptionOps" class="extmbr" name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang">Lang</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SetToLinkedListTransformationextendsSetLinkedListTransformationwithArrayEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withVarEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withTuple2EscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withOptionEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withLambdaEscapeLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]withRuleBasedLowering[ch.epfl.data.dblab.transformers.SetToLinkedListTransformation.Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Converts a Set collection, which there is no duplicate element inserted into it,
to a linked list.</p><div class="fullcomment"><div class="comment cmt"><p>Converts a Set collection, which there is no duplicate element inserted into it,
to a linked list.
To check how this transformation is implemented take a look at the implementation
of <span class="extype" name="sc.pardis.shallow.scalalib.collection.SetLinkedList">sc.pardis.shallow.scalalib.collection.SetLinkedList</span>. Purgatory automatically
generates the skeleton of the core part of this transformation out of the shallow
implementation.</p><p>Example:</p><pre><span class="kw">val</span> elements: Collection[A] = <span class="cmt">// some collection of elements of type A</span>
<span class="kw">val</span> set = <span class="std">Set</span>[A]()
<span class="kw">for</span>(elem <span class="kw">&lt;-</span> elements) {
  set += elem
}
...
<span class="kw">for</span>(e <span class="kw">&lt;-</span> set) { <span class="cmt">// desugared into `set.foreach(e => ...)`</span>
  process(e)
}</pre><p>is converted into:</p><pre><span class="kw">val</span> elements: Collection[A] = <span class="cmt">// some collection of elements of type A</span>
<span class="kw">var</span> setLinkedList = <span class="kw">new</span> Container[A](<span class="kw">null</span>)
<span class="kw">for</span>(elem <span class="kw">&lt;-</span> elements) {
  <span class="kw">if</span> (setLinkedList == <span class="kw">null</span>) {
    setLinkedList = <span class="kw">new</span> Container(elem, <span class="kw">null</span>)
  } <span class="kw">else</span> {
    <span class="kw">val</span> prevNext = setLinkedList.next
    <span class="kw">val</span> current = <span class="kw">new</span> Cont(elem, prevNext)
    setLinkedList.next = current
  }
}
...
<span class="kw">var</span> current = setLinkedList
<span class="kw">while</span> (current != <span class="kw">null</span>) {
  <span class="kw">val</span> next = current.next
  process(current.elem)
  current = next
}</pre><p>Precondition:
The elements inserted into the set should not have any duplication. Otherwise,
this transformation does not work correctly. There is no analysis phase involved
for check this contraint, which means it should be made sure by the user.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.SingletonHashMapToValueTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="SingletonHashMapToValueTransformerextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="SingletonHashMapToValueTransformer:SingletonHashMapToValueTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="SingletonHashMapToValueTransformer.html"><span class="name">SingletonHashMapToValueTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SingletonHashMapToValueTransformerextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Converts a HashMap with only one constant key to a local variable of its
corresponding value.</p><div class="fullcomment"><div class="comment cmt"><p>Converts a HashMap with only one constant key to a local variable of its
corresponding value.</p><p>Example:</p><pre><span class="kw">val</span> hm = <span class="kw">new</span> HashMap[<span class="std">String</span>, <span class="std">Array</span>[<span class="std">Int</span>]]
<span class="kw">while</span>(...) {
  <span class="kw">val</span> array = hm.getOrElseUpdate(<span class="lit">"Total"</span>, <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](<span class="num">5</span>))
  array(<span class="num">0</span>) = foo()
  ...
  array(<span class="num">4</span>) = goo()
}
hm.foreach({ <span class="kw">case</span> (k, v) <span class="kw">=&gt;</span>
  process(v)
})</pre><p>is converted to:</p><pre><span class="kw">val</span> array = <span class="kw">new</span> <span class="std">Array</span>[<span class="std">Int</span>](<span class="num">5</span>)
<span class="kw">while</span>(...) {
  array(<span class="num">0</span>) = foo()
  ...
  array(<span class="num">4</span>) = goo()
}
process(array)</pre><p>Preconditions:
a) There should be only one constant key for the HashMap.
b) The value for that particular key should be assigned only by <code>getOrElseUpdate</code>
and only invokation of this method in only one statement.
c) The value should not have dependencies on the statements happening between
<code>new HashMap</code> and the invokation of <code>getOrElseUpdate</code>.
d) Only in the case of using the following 3 methods
of a HashMap this transformation can be applied: 1) getOrElseUpdate 2) foreach
3) remove.
e) In foreach method, there should be no use of the key, which means only the
value should be used.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.StatisticsEstimator" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="StatisticsEstimatorextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="StatisticsEstimator:StatisticsEstimator"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="StatisticsEstimator.html"><span class="name">StatisticsEstimator</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@StatisticsEstimatorextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Analyzes the query to gather additional statistics.</p>
    </li><li name="ch.epfl.data.dblab.transformers.StringDictionaryTransformer" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="StringDictionaryTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="StringDictionaryTransformer:StringDictionaryTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="StringDictionaryTransformer.html"><span class="name">StringDictionaryTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@StringDictionaryTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Creates a dictionary for strings in the loader and in the query processor transforms string operations to integer
operations.</p>
    </li><li name="ch.epfl.data.dblab.transformers.StringOptimization" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="StringOptimizationextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]"></a>
      <a id="StringOptimization:StringOptimization"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="StringOptimization.html"><span class="name">StringOptimization</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@StringOptimizationextendsRecursiveRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Fine-grained optimizations for string operations.</p><div class="fullcomment"><div class="comment cmt"><p>Fine-grained optimizations for string operations.</p><p>Example:</p><pre>string.startsWith(<span class="lit">"foo"</span>)</pre><p>is converted to</p><pre>string(<span class="num">0</span>) == <span class="lit">'f'</span> &amp;&amp; string(<span class="num">1</span>) == <span class="lit">'o'</span> &amp;&amp; string(<span class="num">2</span>) == <span class="lit">'o'</span></pre></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.Tuple2Lowering" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="Tuple2Lowering[Lang&lt;:ch.epfl.data.dblab.deep.dsls.QueryEngineExp]extendsRecursiveRuleBasedTransformer[Lang]withArrayEscapeLowering[Lang]withLambdaEscapeLowering[Lang]withRuleBasedLowering[Lang]"></a>
      <a id="Tuple2Lowering[Lang&lt;:QueryEngineExp]:Tuple2Lowering[Lang]"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="Tuple2Lowering.html"><span class="name">Tuple2Lowering</span></a><span class="tparams">[<span name="Lang">Lang &lt;: <a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a></span>]</span><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RecursiveRuleBasedTransformer">RecursiveRuleBasedTransformer</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.Tuple2Lowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.ArrayEscapeLowering">ArrayEscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.Tuple2Lowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.LambdaEscapeLowering">LambdaEscapeLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.Tuple2Lowering.Lang">Lang</span>] with <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedLowering">RuleBasedLowering</span>[<span class="extype" name="ch.epfl.data.dblab.transformers.Tuple2Lowering.Lang">Lang</span>]</span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@Tuple2Lowering[Lang&lt;:ch.epfl.data.dblab.deep.dsls.QueryEngineExp]extendsRecursiveRuleBasedTransformer[Lang]withArrayEscapeLowering[Lang]withLambdaEscapeLowering[Lang]withRuleBasedLowering[Lang]" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A lowering transformation for converting Tuple2 objects into records.</p>
    </li><li name="ch.epfl.data.dblab.transformers.TypeAssertion" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="TypeAssertionextendsAssertionwithProductwithSerializable"></a>
      <a id="TypeAssertion:TypeAssertion"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">case class</span>
      </span>
      <span class="symbol">
        <a href="TypeAssertion.html"><span class="name">TypeAssertion</span></a><span class="params">(<span name="predicate">predicate: (<span class="extype" name="ch.epfl.data.sc.pardis.types.PardisType">PardisType</span>[<span class="extype" name="scala.Any">Any</span>]) ⇒ <span class="extype" name="scala.Boolean">Boolean</span></span>)</span><span class="result"> extends <a href="Assertion.html" class="extype" name="ch.epfl.data.dblab.transformers.Assertion">Assertion</a> with <span class="extype" name="scala.Product">Product</span> with <span class="extype" name="scala.Serializable">Serializable</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@TypeAssertionextendsAssertionwithProductwithSerializable" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">An assertion for checking a predicate on types
</p><div class="fullcomment"><div class="comment cmt"><p>An assertion for checking a predicate on types
</p></div><dl class="paramcmts block"><dt class="param">predicate</dt><dd class="cmt"><p>the predicate function on a type</p></dd></dl></div>
    </li><li name="ch.epfl.data.dblab.transformers.WhileRangeProcessing" visbl="pub" data-isabs="true" fullComment="no" group="Ungrouped">
      <a id="WhileRangeProcessingextendsAnyRef"></a>
      <a id="WhileRangeProcessing:WhileRangeProcessing"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">trait</span>
      </span>
      <span class="symbol">
        <a href="WhileRangeProcessing.html"><span class="name">WhileRangeProcessing</span></a><span class="result"> extends <span class="extype" name="scala.AnyRef">AnyRef</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@WhileRangeProcessingextendsAnyRef" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">An interface containing appropriate methods and data structures for processing
while loops which are iterating over a range
</p>
    </li><li name="ch.epfl.data.dblab.transformers.WhileToRangeForeachTransformer" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="WhileToRangeForeachTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withWhileRangeProcessing"></a>
      <a id="WhileToRangeForeachTransformer:WhileToRangeForeachTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">class</span>
      </span>
      <span class="symbol">
        <a href="WhileToRangeForeachTransformer.html"><span class="name">WhileToRangeForeachTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.RuleBasedTransformer">RuleBasedTransformer</span>[<a href="../deep/dsls/QueryEngineExp.html" class="extype" name="ch.epfl.data.dblab.deep.dsls.QueryEngineExp">QueryEngineExp</a>] with <a href="WhileRangeProcessing.html" class="extype" name="ch.epfl.data.dblab.transformers.WhileRangeProcessing">WhileRangeProcessing</a></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@WhileToRangeForeachTransformerextendsRuleBasedTransformer[ch.epfl.data.dblab.deep.dsls.QueryEngineExp]withWhileRangeProcessing" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">A transformer which rewrites while loops whenever possible to for expressions.</p><div class="fullcomment"><div class="comment cmt"><p>A transformer which rewrites while loops whenever possible to for expressions.</p><p>As an example the following program:</p><pre><span class="kw">var</span> i = <span class="num">0</span>
<span class="kw">while</span>(i &lt; size) {
  f(i)
  i += <span class="num">1</span>
}</pre><p>is converted into</p><pre><span class="kw">for</span>(j <span class="kw">&lt;-</span> <span class="num">0</span> until size) {
  f(j)
}</pre><p>Preconditions:
a) There should be no further mutation into the variable <code>i</code> in <code>f(i)</code>.
b) There should be no use of the variable <code>i</code> outside of the loop.
c) The while loop can only iterate ascendingly.
d) The step counter can be every positive number.</p><p>Additional transformations:
As we are using administrative normal form (ANF), we are placing a let-binding for
every read of a mutable variable. This means that every read from the variable <code>i</code>
is associated with a new symbol. These symbols in <code>f(i)</code> should be substituted
by the range index <code>j</code>.
Moreover, our system ensures that the programs in ANF will not have any issues
with name conflicits. Hence, even if in the inital program another variable is
defined with the name <code>i</code> in the block of f(i), our engine distinguishes them
with different symbols.
</p></div></div>
    </li></ol>
            </div>

        

        <div id="values" class="values members">
              <h3>Value Members</h3>
              <ol><li name="ch.epfl.data.dblab.transformers.AssertTransformer" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="AssertTransformer"></a>
      <a id="AssertTransformer:AssertTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="AssertTransformer$.html"><span class="name">AssertTransformer</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@AssertTransformer" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for <a href="AssertTransformer.html" class="extype" name="ch.epfl.data.dblab.transformers.AssertTransformer">AssertTransformer</a> class.</p>
    </li><li name="ch.epfl.data.dblab.transformers.ConstSizeArrayToLocalVars" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="ConstSizeArrayToLocalVars"></a>
      <a id="ConstSizeArrayToLocalVars:ConstSizeArrayToLocalVars"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="ConstSizeArrayToLocalVars$.html"><span class="name">ConstSizeArrayToLocalVars</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.TransformerHandler">TransformerHandler</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ConstSizeArrayToLocalVars" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for creating instances of <a href="ConstSizeArrayToLocalVars.html" class="extype" name="ch.epfl.data.dblab.transformers.ConstSizeArrayToLocalVars">ConstSizeArrayToLocalVars</a>
</p>
    </li><li name="ch.epfl.data.dblab.transformers.ContainerFlatTransformer" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="ContainerFlatTransformer"></a>
      <a id="ContainerFlatTransformer:ContainerFlatTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="ContainerFlatTransformer$.html"><span class="name">ContainerFlatTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.TransformerHandler">TransformerHandler</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ContainerFlatTransformer" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for creating instances of <a href="ContainerFlatTransformer.html" class="extype" name="ch.epfl.data.dblab.transformers.ContainerFlatTransformer">ContainerFlatTransformer</a>
</p>
    </li><li name="ch.epfl.data.dblab.transformers.ContainerLowering" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="ContainerLowering"></a>
      <a id="ContainerLowering:ContainerLowering"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="ContainerLowering$.html"><span class="name">ContainerLowering</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.TransformerHandler">TransformerHandler</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@ContainerLowering" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for creating instances of <a href="ContainerLowering.html" class="extype" name="ch.epfl.data.dblab.transformers.ContainerLowering">ContainerLowering</a>
</p>
    </li><li name="ch.epfl.data.dblab.transformers.HashMapHoist" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="HashMapHoist"></a>
      <a id="HashMapHoist:HashMapHoist"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="HashMapHoist$.html"><span class="name">HashMapHoist</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.TransformerHandler">TransformerHandler</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@HashMapHoist" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for creating instances of <a href="HashMapHoist.html" class="extype" name="ch.epfl.data.dblab.transformers.HashMapHoist">HashMapHoist</a>
</p>
    </li><li name="ch.epfl.data.dblab.transformers.RecordLowering" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="RecordLowering"></a>
      <a id="RecordLowering:RecordLowering"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="RecordLowering$.html"><span class="name">RecordLowering</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@RecordLowering" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.SetToArrayTransformation" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="SetToArrayTransformation"></a>
      <a id="SetToArrayTransformation:SetToArrayTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="SetToArrayTransformation$.html"><span class="name">SetToArrayTransformation</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SetToArrayTransformation" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.SetToLinkedListTransformation" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="SetToLinkedListTransformation"></a>
      <a id="SetToLinkedListTransformation:SetToLinkedListTransformation"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="SetToLinkedListTransformation$.html"><span class="name">SetToLinkedListTransformation</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SetToLinkedListTransformation" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.SingletonHashMapToValueTransformer" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="SingletonHashMapToValueTransformer"></a>
      <a id="SingletonHashMapToValueTransformer:SingletonHashMapToValueTransformer"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="SingletonHashMapToValueTransformer$.html"><span class="name">SingletonHashMapToValueTransformer</span></a><span class="result"> extends <span class="extype" name="ch.epfl.data.sc.pardis.optimization.TransformerHandler">TransformerHandler</span></span>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@SingletonHashMapToValueTransformer" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.TreeDumper" visbl="pub" data-isabs="false" fullComment="yes" group="Ungrouped">
      <a id="TreeDumper"></a>
      <a id="TreeDumper:TreeDumper"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">object</span>
      </span>
      <span class="symbol">
        <a href="TreeDumper$.html"><span class="name">TreeDumper</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@TreeDumper" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      <p class="shortcomment cmt">Factory for creating a transformation phase which does not change the given program, but dumps its representation into a file.</p><div class="fullcomment"><div class="comment cmt"><p>Factory for creating a transformation phase which does not change the given program, but dumps its representation into a file.
The main use case is for debugging the transformation phases in a transformation pipeline.
</p></div></div>
    </li><li name="ch.epfl.data.dblab.transformers.c" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="c"></a>
      <a id="c:c"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a href="c/package.html"><span class="name">c</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@c" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li><li name="ch.epfl.data.dblab.transformers.monad" visbl="pub" data-isabs="false" fullComment="no" group="Ungrouped">
      <a id="monad"></a>
      <a id="monad:monad"></a>
      <h4 class="signature">
      <span class="modifier_kind">
        <span class="modifier"></span>
        <span class="kind">package</span>
      </span>
      <span class="symbol">
        <a href="monad/package.html"><span class="name">monad</span></a>
      </span>
      </h4><span class="permalink">
      <a href="../../../../../index.html#ch.epfl.data.dblab.transformers.package@monad" title="Permalink" target="_top">
        <img src="../../../../../lib/permalink.png" alt="Permalink" />
      </a>
    </span>
      
    </li></ol>
            </div>

        

        
        </div>

        <div id="inheritedMembers">
        
        
        </div>

        <div id="groupedMembers">
        <div class="group" name="Ungrouped">
              <h3>Ungrouped</h3>
              
            </div>
        </div>

      </div>

      <div id="tooltip"></div>

      <div id="footer">  </div>


    </body>
      </html>
